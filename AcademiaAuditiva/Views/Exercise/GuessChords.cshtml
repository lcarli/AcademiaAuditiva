@model AcademiaAuditiva.ViewModels.ExerciseViewModel
@{
	ViewBag.Title = Localizer["Exercise.Chords.Title"];
	ViewData["FiltersPartial"] = "_ExerciseFilters";
}

<div class="container mt-4">
	@await Html.PartialAsync("_ExerciseHeader", Model)

	<div class="row">
		<div class="col-lg-4">
			@await Html.PartialAsync("_ExerciseInstructions", Model)
		</div>
		<div class="col-lg-8">
			<div class="card shadow-sm p-4">
				<h4 class="text-center mb-3">@Localizer["Exercise.ChordsText"]</h4>

				<!-- WAVEFORM (opcional) -->
				<div id="waveform" class="mb-4 text-center" style="height: 100px;"></div>

				<!-- BOTÕES DE ÁUDIO -->
				<div class="d-flex justify-content-center gap-3 mb-4">
					<button class="btn btn-lg btn-primary rounded-circle" id="playChord" title="@Localizer["Play"]">
						<i class="bi bi-play-fill"></i>
					</button>
					<button class="btn btn-lg btn-outline-secondary rounded-circle" id="replayChord" title="@Localizer["Replay"]">
						<i class="bi bi-arrow-repeat"></i>
					</button>
				</div>

				<!-- RESPOSTA: NOTAS -->
				<div class="d-flex flex-wrap justify-content-center gap-2 mb-4">
					@foreach (var note in Model.AnswerOptions)
					{
						<button class="btn btn-outline-dark guessNote" data-note="@note">@note.Replace("s", "#")</button>
					}
				</div>

				<!-- RESPOSTA: QUALIDADE DO ACORDE -->
				<div class="d-flex flex-wrap justify-content-center gap-2 mb-4 hidden" id="guessQualityContainer">
					<button class="btn btn-outline-dark guessQuality" data-quality="major">@Localizer["Exercise.Major"]</button>
					<button class="btn btn-outline-dark guessQuality" data-quality="minor">@Localizer["Exercise.Minor"]</button>
					<button class="btn btn-outline-dark guessQuality" data-quality="7">@Localizer["Exercise.7"]</button>
					<button class="btn btn-outline-dark guessQuality" data-quality="9">@Localizer["Exercise.9"]</button>
				</div>

				<!-- BOTÃO VALIDAR -->
				<div class="text-center">
					<button id="validateGuess" class="btn btn-success">@Localizer["Exercise.ValidationButton"]</button>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- MODAL DE FILTROS -->
@await Html.PartialAsync("_ExerciseFiltersModal", Model)

<!-- LOCALIZER JS SUPPORT -->
<div id="localizer"
	data-note-not-selected-title="@Localizer["Exercise.NoteNotSelectedTitle"]"
	data-note-not-selected-text="@Localizer["Exercise.GuessChordError1"]"
	data-incomplete-title="@Localizer["Exercise.IncompleteTitle"]"
	data-incomplete-text="@Localizer["Exercise.SelectChordText"]"
	data-correct-message="@Localizer["Exercise.CorrectMessage"]"
	data-correct-message-text="@Localizer["Exercise.CorrectMessageText"]"
	data-wrong-message="@Localizer["Exercise.WrongMessage"]"
	data-wrong-message-text="@Localizer["Exercise.WrongMessageText"]">
</div>

@section Scripts {
	<script src="~/js/Exercises/GuessChords.js"></script>
}